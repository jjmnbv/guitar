<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <!--  页面信息  -->
    <meta content="" name="description" />
<meta content="" name="author" />
<meta content="" name="keyword" /> 
    <!--  页面标题  -->
    <title>流程引擎 | 流程管理</title>


    <link rel="stylesheet"
          href="/static/lib/google/fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all"
    />
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/global/plugins/font-awesome/css/font-awesome.min.css"
    />
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/global/plugins/simple-line-icons/simple-line-icons.min.css"
    />
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/global/plugins/uniform/css/uniform.default.css"/>
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css"
    />
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-toastr/toastr.min.css"/>
    <link rel="stylesheet" href="/static/lib/metronic/4.5.2/assets/global/css/components.min.css"
          id="style_components"
    />
    <link rel="stylesheet" href="/static/lib/metronic/4.5.2/assets/global/css/plugins.min.css"/>
    <link rel="stylesheet" href="/static/lib/metronic/4.5.2/assets/layouts/layout/css/layout.min.css"/>
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/layouts/layout/css/themes/darkblue.min.css"
          id="style_color"
    />
    <link rel="stylesheet" href="/static/lib/metronic/4.5.2/assets/layouts/layout/css/custom.min.css"/>
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/global/plugins/jstree/dist/themes/default/style.min.css"
    />
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/blueimp-gallery/blueimp-gallery.min.css"
    />
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/css/jquery.fileupload.css"
    />
    <link rel="stylesheet"
          href="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/css/jquery.fileupload-ui.css"
    />
    <link href="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet" type="text/css" />
    <!--[if lt IE 9]>
    <script src="/static/lib/metronic/4.5.2/assets/global/plugins/respond.min.js"></script>
    <script src="/static/lib/metronic/4.5.2/assets/global/plugins/excanvas.min.js"></script>
    <![endif]-->

    <!--  第三方css  -->
    <!-- @Override -->
<link rel="stylesheet" href="/static/lib/metronic/4.5.2/assets/global/plugins/select2/css/select2.min.css">

    <link rel="shortcut icon" href="/static/app/1.0.0/img/favicon.ico"/>
    <link rel="stylesheet" href="/static/app/1.0.0/css/reset.css"/>
    <link rel="stylesheet" href="/static/app/1.0.0/css/app.css"/>
    <link rel="stylesheet" href="/static/app/1.0.0/css/app-plugins.css"/>
    <!--  自定义css  -->
    <!-- @Override -->
<link rel="stylesheet" href="/static/app/1.0.0/css/cb/common-form.css" />
<link rel="stylesheet" href="/static/app/1.0.0/css/cb/modal-form.css" /> 
</head>

<body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white">
<div id="bootstrap-select-box" ></div>
<!-- 生成html填充处  -->
<div id="app"></div>
<!-- 首屏数据模板  -->
<script id="mainTemplate" type="text/x-handlebars-template">
<header>
    <div class="page-header navbar navbar-fixed-top ">
        <div class="page-header-inner clearfix">
            <div class="page-logo">
                <a href="{{base}}/index.html">
                    <img src="{{path.app}}/img/logo-big-auto.png" width="116"/>
                    <h1 class="logo-text">柏诚消费金融情报系统</h1>
                </a>
            </div>
            <div class="pull-right">
                <ul class="main-menu nav navbar-nav pull-right">
                    {{#each mainMenus}}
                        <li>
                            <a class="nav-item {{#if (menu-active)}} active{{/if}}"
                                {{#if (has-children)}}
                               href="javascript:;"
                                {{else}}
                               href="{{../base}}{{url}}"
                                {{/if}}
                                style="background-image: url({{../cubase}}/cu/cuicons/loadImage?iconNo={{styleObject.iconClassName}}); background-size:25px;"
                               >{{text}}
                            </a>
                            <ul class="sub-menu">
                                {{#each children}}
                                    <li class="nav-item">
                                        <a {{#if (has-children)}}
                                           href="javascript:;"
                                           {{else}}
                                           href="{{../../base}}{{url}}"
                                           {{/if}}
                                           class="nav-link{{#if (has-children)}} nav-toggle{{/if}}"
                                        >
                                            <span class="title">{{text}}</span>
                                        {{#if (has-children)}}<img src="{{../../path.app}}/img/nav/daohangjiantou.png"/>{{/if}}
                                        </a>
                                        <ul class="{{#if (has-children)}} sub-menu  three-menu{{/if}}" dir="rtl">
                                            {{#each children}}
                                                <li class="nav-item">
                                                    <a href="{{../../../base}}{{url}}"
                                                       class="nav-link">
                                                        <span class="title">{{text}}</span>
                                                        {{#if (has-children)}}<img src="{{../../../path.app}}/img/nav/daohangjiantou.png"/>{{/if}}
                                                    </a>
                                                </li>
                                            {{/each}}
                                        </ul>
                                    </li>
                                {{/each}}
                            </ul>
                        </li>
                    {{/each}}
                </ul>
            </div>
        </div>
        <div>
            <div class="menu-toggler sidebar-toggler">
                <span>我的快捷键</span>
            </div>
        </div>
    </div>
</header>
<div class="page-container">
<div class="page-sidebar" data-menu-store="menus">
    <ul class="page-sidebar-menu page-sidebar-menu-hover-submenu">
        {{#each menus}}
        <li class="nav-item">
            <a href="{{../base}}{{url}}"
               class="nav-link"
            > {{{menu-icon}}}<span class="title">{{text}}</span>
            </a>
        </li>
        {{/each}}
    </ul>
</div>
<div class="page-content-wrapper">
<div class="page-content">
    {{#unless forceChangeLoginPassword}}
    {{#if crumbs}}
    <div class="page-crumbs clearfix">
        <dl>
            <dt class="{{crumbs.icon}}"><a href="{{crumbs.dt.url}}">{{crumbs.dt.text}}</a></dt>
            {{#each crumbs.dd}}
            <dd><a href="{{url}}">{{text}}</a></dd>
            {{/each}}
            <span  class="custom-date">当前业务日期：<a></a></span>
        </dl>
        <div class="loginDiv">
            <div class="login-info" id="loginInfo">
                <a id="set_img" href="javascript:;" onclick="showLogin();">
                    <img  src=""/>
                    <span>{{userInfo.loginName}}</span>
                </a>
                <ul style="display: none">
                    <li><a href="{{cubase}}/cu/personal-settings/personal-info-maintenance.html">个人信息</a></li>
                    <li><a href="{{cubase}}/cu/log-view/log-oprate.html">查看日志</a></li>
                    <li><a href="{{cubase}}/cu/personal-settings/update-password.html">修改登录密码</a></li>
                    <li class="li-time">上次登录时间</br>{{userInfo.loginTime}}</li>
                    <li><a href="{{cubase}}/logout">退出登录</a></li>
                </ul>
            </div>
        </div>
    </div>
    {{/if}}
    <!-- @Override -->

    <div class="search main-page" id="mainPage">
        <div class="portlet box searchPortlet">
            <div class="portlet-title clearfix">
                <!--<div class="caption">全部查询</div>-->
                <div class="allSearchBox">
                    <div class="allsearch clearfix">
                      <form action="" method="" class="searchAllForm">
                        <div class="inputDiv clearfix">
                            <!--<a href="javascript:;" class="closeSearch" id="closeSearch">
                              <img src="/static/app/1.0.0/img/icon/closeSearch.png" />
                          </a>-->
                            <input placeholder="搜索" name="queryAllParamString"/>
                        </div>
                        <button type="button">
                            <img src="/static/app/1.0.0/img/icon/searchJ.png" title="点击查询"/>
                        </button>
                        </form>
                    </div>
                </div>
                <div class="tools clearfix">
                    <a href="javascript:;" class="expand toggleSearch">展开全部查询</a>
                </div>
    
            </div>
            <div class="portlet-body form filter-query-form">
                <!-- @Override -->
    <!--页面查询条件-->
    <form class="bsdForm pagination-form" id="loanTypeForm">
        <div class="form-group">
            <label class="control-label">流程名称</label>
            <div>
                <input type="text" class="form-control" name="name">
            </div>
        </div>
        <div class="form-group">
            <label class="control-label" for="description">流程描述</label>
            <div>
                <input type="text" class="form-control" name="description" id="description">
            </div>
        </div>
    </form>
    
                <div class="search-btn-wrap text-center">
                    <button type="submit" class="btn blue mainCol pagination-query">查询</button>
                    <button type="reset" class="btn blue mainCol pagination-reset">重置</button>
                </div>
            </div>
        </div>
        <div class="portlet box">
            <!-- @Override -->
    <!--页面列表-->
    <div class="portlet box reg">
        <div class="portlet-title">
            <div class="caption">流程列表</div>
            <div class=" actions clearfix">
                <a href="javascript:;" title="新建" id="add" class="add-sign"></a>
                <a href="javascript:;" title="复制" id="copy" class="copy-sign"></a>
                <a href="javascript:;" title="刷新" id="refresh" class="Refresh-sign"></a>
                <a href="javascript:;" title="删除" id="delete" class="delete-sign"></a>
            </div>
        </div>
        <div class="portlet-body">
            <div class="tabbable tabbable-tabdrop">
                <div class="tab-content">
                    <div class="tab-pane active" id="tab1">
                        <div class="pagination-reload"></div>
                        <div class="portlet-body pagination-container" data-page-first-store="first-store" data-page-url="/WORKFLOW_FLOWS" data-page-template-id="flows-page-template">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
        </div>
    </div>    {{/unless}}
</div>
</div>
    <a href="javascript:;" class="page-quick-sidebar-toggler">
        <i class="icon-login"></i>
    </a>
</div>
    <footer>
        <div class="page-footer">
            <div class="page-footer-inner"> 2016 &copy; 中科柏诚科技(北京)股份有限公司.</div>
            <div class="scroll-to-top">
                <i class="icon-arrow-up"></i>
            </div>
        </div>
    </footer>
    <div id="chgloginpwd-modal" class="modal fade modal-scroll" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title"><i class="fa fa-edit"></i> <strong><span
                            id="chgloginpwd-msg">修改登录密码</span></strong>
                    </h4>
                </div>
                <div class="modal-body form">
                    <form id="edit-user-passwd" action="{{base}}/cu/update/loginpwd" role="form"
                          class="form-horizontal">
                        <div class="form-body">
                            <div class="form-group">
                                <label class="control-label col-md-3 fill">原登录密码</label>
                                <div class="col-md-8">
                                    <input type="password" name="plainOldPassword" class="form-control"
                                           data-rule-required="1">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 fill">新登录密码</label>
                                <div class="col-md-8">
                                    <input type="password" name="plainNewPassword" id="password"
                                           class="form-control passwordCheck" data-rule-required="1" minlength="6" maxlength="16"
                                           data-msg-minlength="密码至少输入六位！">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-3 fill">新密码确认</label>
                                <div class="col-md-8">
                                    <input type="password" name="newPassword" class="form-control"
                                           data-rule-equalto="#password" data-msg-equalto="两次密码不一致"
                                           data-rule-required="1" >
                                </div>
                            </div>
                        </div>
                        <div class="form-actions right">
                            <button type="button" class="btn blue" id="updatePWD">提交</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</script>
<!-- 弹框类占位符  -->
<!-- @Override -->
<!--环节设置 模态框-->
<div id="step-list-modal" class="modal container fade modal-scroll" tabindex="-1" aria-hidden="true" data-page-template-id="#step-list-template"
    data-url="WORKFLOW_FLOW_STEPS">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title"><i class="fa fa-list"></i> <strong>贷款申请-环节列表</strong></h4>
            </div>
            <div class="modal-body" id="model_list">

            </div>
        </div>
    </div>
</div>
<!--流程名称 模态框-->
<div id="flow-info-editmodal" class="modal container fade modal-scroll" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title"><i class="fa fa-list"></i> <strong></strong></h4>
            </div>
            <div class="modal-body">
                <form action="/bpm/flowupdatex" method="POST" role="form" class="form-horizontal">
                    <div class="form-body">
                        <input type="hidden" name="id" readonly="readonly" required>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">流程名称:</label>
                                    <div class="col-md-10">
                                        <input name="name" type="text" class="form-control input-sm" maxlength="30" placeholder="请输入流程名称..." required>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">流程标识:</label>
                                    <div class="col-md-10">
                                        <input name="key" type="text" class="form-control input-sm" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">流程说明:</label>
                                    <div class="col-md-10">
                                        <textarea name="description" class="form-control input-sm" maxlength="100" placeholder="请输入流程说明..." rows="5" cols="3"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">plugin-js:</label>
                                    <div class="col-md-10">
                                        <input name="pluginJs" type="text" class="form-control input-sm" placeholder="请输入关联js...">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">plugin-css:</label>
                                    <div class="col-md-10">
                                        <input name="pluginCss" type="text" class="form-control input-sm" placeholder="请输入关联css...">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline dark ok">确认</button>
                <button type="button" data-dismiss="modal" class="btn btn-outline dark">取消</button>
            </div>
        </div>
    </div>
</div>
<!--贷款申请简要录入-配置 模态框-->
<div id="step-config-modal" class="modal container fade modal-scroll" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title"><i class="fa fa-list"></i><strong></strong></h4>
            </div>
            <div class="modal-body">
                <form action="/workflow/stepconfig/update" method="POST" role="form" class="form-horizontal">
                    <div class="form-body">
                        <input type="hidden" name="id" readonly="readonly">
                        <input type="hidden" name="flowKey" readonly="readonly">
                        <input type="hidden" name="flowInfoId" readonly="readonly">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">流程名称:</label>
                                    <div class="col-md-10">
                                        <input name="flowName" type="text" class="form-control input-sm" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">运行系统:</label>
                                    <div class="col-md-10"><input name="runSystem" type="text" class="form-control input-sm" readonly></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">环节名称:</label>
                                    <div class="col-md-10">
                                        <input name="stepName" type="text" class="form-control input-sm" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">环节标识:</label>
                                    <div class="col-md-10"><input name="stepKey" type="text" class="form-control input-sm" readonly></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">环节说明:</label>
                                    <div class="col-md-10"><textarea name="stepDesc" class="form-control input-sm" rows="3" cols="5"></textarea></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">环节类型:</label>
                                    <div class="col-md-10"><input name="stepType" type="text" class="form-control input-sm" readonly></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">操作视图:</label>
                                    <div class="col-md-10">
                                        <input type="hidden" name="relView" readonly/>
                                        <input data-target="#relview-sel-modal" data-toggle="modal" name="relViewDis" type="text" class="form-control input-sm" readonly></div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <input name="handlePositionName" type="hidden" id="handlePositionName" readonly/>
                                    <label class="col-md-2 control-label">参与岗位:</label>
                                    <div class="col-md-10" id="b-p-positionNames">
                                        <select multiple="multiple" data-error-container="#b-p-positionNames" name="handlePositionKeys" class="form-control select2 selectloader-positions"
                                            style="position:absolute;width:100%;" data-selectloader-store="positions" data-selectloader-vkey="postNo"
                                            data-selectloader-tkey="postNa">
                                            <option value="">请选择...</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <input name="handleUrname" id="handleUrname" type="hidden" readonly>
                                    <label class="col-md-2 control-label">参与人:</label>
                                    <div class="col-md-10">
                                        <input name="handleUlname" type="text" class="form-control input-sm candidateUsers" data-text-input="#handleUrname" data-key-type="USER"
                                            data-jstreemultiselect-store="candidateUsers" data-jstreeloader-target="#jstree-panel"
                                            placeholder="参与人,多个人以,分隔...">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">会签:</label>
                                    <div class="col-md-10">
                                        <input type="checkbox" name="signIn" class="form-control input-sm" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row signInStrategy hide">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">会签策略:</label>
                                    <div class="col-md-10">
                                        <select name="signInStrategy" readonly class="form-control selectloader-signinstrategy" data-selectloader-store="signinstrategy"
                                            data-selectloader-vkey="name" data-selectloader-tkey="desc" tabindex="1">
                                            <option value="">请选择...</option>
                                            <option value="1">所有人同意则为通过，若有一个人不同意则为拒绝</option>
                                            <option value="2">超过二分之一同意为通过，不足或者等于二分之一为拒绝</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">提交方式:</label>
                                    <div class="col-md-10">
                                        <input type="hidden" name="commitWayValue" id="commitWayValue" readonly/>
                                        <div class="radio-list commitway" data-radioloader-name="commitWayKey" data-text-input="#commitWayValue" data-radioloader-val="1"
                                            data-radioloader-store="commitway" data-radioloader-vkey="code" data-radioloader-tkey="name"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">分单方式:</label>
                                    <div class="col-md-10">
                                        <input type="hidden" name="assignWayValue" id="assignWayValue" readonly/>
                                        <div class="radio-list assignway" data-radioloader-name="assignWayKey" data-text-input="#assignWayValue" data-radioloader-val="1"
                                            data-radioloader-store="assignway" data-radioloader-vkey="code" data-radioloader-tkey="name"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row autoAssignStrategy hide">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">分单策略:</label>
                                    <div class="col-md-10">
                                        <select name="autoAssignStrategy" readonly class="form-control selectloader-autoassignstrategy" data-selectloader-store="autoassignstrategy"
                                            data-selectloader-vkey="name" data-selectloader-tkey="desc" tabindex="1">
                                            <option value="">请选择...</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">事件处理器:</label>
                                    <div class="col-md-10">
                                        <input type="hidden" name="plugjson" readonly/>
                                        <textarea readonly data-target="#plug-sel-modal" data-toggle="modal" name="plugjsonDis" class="form-control input-sm" rows="3"
                                            cols="5"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">里程碑:</label>
                                    <div class="col-md-10">
                                        <input type="checkbox" value="Y" name="mileStone" class="form-control input-sm" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">取消时长(秒):</label>
                                    <div class="col-md-10">
                                        <input type="input" name="cancelTime" class="form-control input-sm number" maxlength="30" placeholder="请输入取消时长..." />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline dark ok">确认</button>
                <button type="button" data-dismiss="modal" class="btn btn-outline dark">取消</button>
            </div>
        </div>
    </div>
</div>

<div id="relview-sel-modal" class="modal fade draggable-modal" role="basic" data-page-template-id="#relview-sel-template"
    data-page-tr-template-id="#relview-sel-tr-template" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog" style="width:40%;">
        <div class="modal-content">
            <div class="modal-header">
                <a href="#" style="float:right;" class="btn btn-circle btn-default btn-sm"><i class="fa fa-plus font-blue"></i> </a>
                <h4 class="modal-title"><i class="fa fa-list"></i> <strong>关联视图</strong></h4>
            </div>
            <div class="modal-body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline dark ok">确认</button>
                <button type="button" data-dismiss="modal" class="btn btn-outline dark">取消</button>
            </div>
        </div>
    </div>
</div>

<div id="plug-sel-modal" class="modal fade" role="basic" data-page-template-id="#plug-sel-template" data-page-tr-template-id="#plug-sel-tr-template"
    tabindex="-1" aria-hidden="true">
    <div class="modal-dialog" style="width:40%;">
        <div class="modal-content">
            <div class="modal-header" style="height:50px;">
                <a href="#" style="float:right;" class="btn btn-circle btn-default btn-sm plus"><i class="fa fa-plus font-blue"></i> </a>
                <h4 class="modal-title" style="font-size:15px;"><i class="fa fa-list"></i> <strong>事件处理</strong></h4>
            </div>
            <div class="modal-body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline dark ok">确认</button>
                <button type="button" data-dismiss="modal" class="btn btn-outline dark">取消</button>
            </div>
        </div>
    </div>
</div>

<!-- 提示类弹框  -->
    <div id="pageModal" class="modal fade" style="display: none;" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div data-modal-size class="modal-dialog">
            <div class="modal-content">
                <div data-modal-header class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 data-modal-title class="modal-title">提示</h4>
                </div>
                <div data-modal-body class="modal-body">
                    <p data-modal-text>这是模态框！</p>
                </div>
                <div data-modal-footer class="modal-footer">
                    <button data-modal-cancel type="button" data-dismiss="modal" class="btn btn-outline dark">取消</button>
                    <button data-modal-ok type="button" class="btn blue">确定</button>
                </div>
            </div>
        </div>
    </div>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/js.cookie.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery.blockui.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/uniform/jquery.uniform.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootbox/bootbox.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-toastr/toastr.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/scripts/app.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-validation/js/jquery.validate.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-validation/js/additional-methods.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-validation/js/localization/messages_zh.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jstree/dist/jstree.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/js/vendor/jquery.ui.widget.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/js/vendor/tmpl.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/js/vendor/load-image.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/js/vendor/canvas-to-blob.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/blueimp-gallery/jquery.blueimp-gallery.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/js/jquery.iframe-transport.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/js/jquery.fileupload.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-process.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-image.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-audio.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-video.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/layouts/layout/scripts/layout.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/layouts/global/scripts/quick-sidebar.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/moment.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js" type="text/javascript"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/clockface/js/clockface.js" type="text/javascript"></script>
<script src="/static/lib/handlebars/4.0.4/handlebars.js"></script>
<script src="/static/lib/jquery-deserialize/1.3.3/jquery.deserialize.min.js"></script>
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.js"></script>
<!-- js第三方库  -->
<!-- @Override -->
<script src="/static/lib/metronic/4.5.2/assets/global/plugins/select2/js/select2.full.min.js"></script>

<script>
    /**
     * 初始化全局app命名空间
     * @type Object
     */
    window.app = window.app || {};
</script>
<!-- 公共js文件  -->
<script src="/static/app/1.0.0/js/helpers.js"></script>
<script src="/static/app/1.0.0/js/app.js"></script>
<!-- 公共模拟数据 -->
<script src="/script/cb/app.js"></script>
<script>
    /**
     * 检测是否已经登录
     */
    app.$getJSON(app.base + '/cb/oauth2/checkLogin').done(function (json) {
        console.log('checkLogin', json);
        if (app.isOK(json)) {
            console.log('已经登录.');
        }
    });
</script>
<script src="/script/cb/availableMenus"></script>
<script src="/script/cb/oauth2/loginUser"></script>
<!-- 首屏数据  -->
<!-- @Override -->
<script src="/script/bpm/index"></script>
<!--加载数据字典-->

<script>
    $('#app').append(Handlebars.compile($('#mainTemplate').html())(app));
</script>
<script src="/static/app/1.0.0/js/init.js"></script>
<script src="/static/app/1.0.0/js/cb/urls.js"></script>
<script src="/static/app/1.0.0/js/app-plugins.js"></script>
<script src="/static/app/1.0.0/js/validation.js"></script>
<script src="/static/app/1.0.0/js/chgloginpwd.js"></script>


<!-- 组件模板类占位符  内容有可能是js文件，也有可能是handlebar模板，所以放在这个位置  -->
<!-- @Override -->
<!--页面列表 内容-->
<script type="text/x-handlebars-template" id="flows-page-template">
    <div class="table-scrollable">
        <table class="table table-striped table-bordered table-hover" id="flowstable">
            <thead>
                <tr>
                    <th>选择</th>
                    <th> 流程名称 </th>
                    <th> 流程标识 </th>
                    <th> 流程描述 </th>
                    <th> 发布状态 </th>
                    <th> 运行状态 </th>
                    <th> 版本号 </th>
                    <th> 创建时间 </th>
                    <th> 操作 </th>
                </tr>
            </thead>
            <tbody>
                {{#each page.content}}
                <tr>
                    <td>
                        <input type="radio" name="sel_radio" class="icheck" data-runstatus={{runStatus}} value="{{id}}" />
                    </td>
                    <td> <a href="#" data-target="#flow-info-editmodal" data-toggle="modal" data-view-flow-name="{{name}}" data-view-flow-id="{{id}}">{{name}}</a>                        </td>
                    <td> {{key}} </td>
                    <td> {{description}} </td>
                    <td> {{deployStatus-text}} </td>
                    <td> {{runStatus-text}} </td>
                    <td> {{version}} </td>
                    <td> {{createTime}} </td>
                    <td>
                        <a href="javascript:;" class="activiti-edit" data-path="${base}" data-activiti-id="{{id}}">编辑</a>
                        {{#if (eq deployStatus '1')}}
                        <a href="#" data-target="#step-list-modal" data-toggle="modal" data-flow-id="{{id}}" data-flow-key="{{key}}" data-flow-name="{{name}}">环节设置</a>
                        {{/if}}
                        <a href="#" class="activiti-view" data-path="${base}" data-activiti-id="{{id}}">流程图</a>
                        <a href="javascript:;" onclick="window.location.href='{{path.base}}/bpm/flowexportxml/{{id}}'" data-activiti-export-xml-id="{{id}}">导出xml</a>
                        <a href="javascript:;" onclick="window.location.href='{{path.base}}/bpm/flowexportjson/{{id}}'" data-activiti-export-xml-id="{{id}}">导出json</a>
                        {{#if (eq deployStatus '0')}}
                        <a href="javascript:;" class="activiti-deploy" data-id="{{id}}" data-activiti-id="{{id}}">部署</a>
                        {{/if}}
                        {{#if (eq runStatus '0')}}
                        <a href="javascript:;" class="activiti-disable" data-id="{{id}}" data-activiti-id="{{id}}">挂起</a>
                        {{/if}}
                        {{#if (eq deployStatus '1') }}
							{{#if (eq runStatus '1') }}
                        <a href="javascript:;" class="activiti-enable" data-id="{{id}}" data-activiti-id="{{id}}">启用</a>
                            {{/if}}
                        {{/if}}
                    </td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
     <div class="row table-pager">
    <div class="col-md-5 col-sm-12">
        <div style="padding-top:8px;">共 {{page.totalPages}} 页 {{page.totalElements}} 条记录</div>
    </div>
    <div class="col-md-7 col-sm-12 clearfix">
        <div >
           <span> 每页显示</span>
            <input value="{{page.size}}"  class="set-num" name="pageSize"/>
            <span id="set_pageNum">
                <a>  <img src="/static/app/1.0.0/img/icon/button_left.png"/></a>
                <a>  <img src="/static/app/1.0.0/img/icon/button_right.png"/></a>
            </span>
            <span> 条记录</span>
           <span> 共<b>  {{#if page.totalElements}}{{page.totalElements}}{{else}}0{{/if}}</b> 条记录</span>
        </div>
        <ul class="pagination pull-right">
            {{#if (page-first)}}
            {{!--<li class="prev disabled"><a href="javascript:;"><i class="fa fa-angle-left"></i>上一页</a></li>--}}
            {{else}}
            <li class="prev" data-page-number="{{page-prev}}"><a href="javascript:;"><img src="/static/app/1.0.0/img/icon/button_fenye_left2.png"/></a></li>
            {{/if}}
            {{#each page.pages}}
                {{#if (page-show-first)}}
                  {{#if (eq this 2)}}
            <li data-page-number="1"><a href="javascript:;">1</a></li>
                  {{else}}
            <li data-page-number="1"><a href="javascript:;">1...</a></li>
                  {{/if}}
                {{/if}}
            <li{{#if (page-current)}} class="active"{{else}} data-page-number="{{this}}"{{/if}}><a href="javascript:;">{{this}}</a></li>
                {{#if (page-show-last)}}
                  {{#if (eq this (sum ../page.totalPages -1))}}
            <li data-page-number="{{../page.totalPages}}"><a href="javascript:;">{{../page.totalPages}}</a></li>
                  {{else}}
            <li data-page-number="{{../page.totalPages}}"><a href="javascript:;">...{{../page.totalPages}}</a></li>
                  {{/if}}
                {{/if}}
            {{/each}}
            {{#if (page-last)}}
            {{!--<li class="next disabled"><a href="javascript:;">下一页<i class="fa fa-angle-right"></i></a></li>--}}
            {{else}}
            <li class="next" data-page-number="{{page-next}}"><a href="javascript:;"><img src="/static/app/1.0.0/img/icon/button_fenye_right2.png"/></a></li>
            {{/if}}
            <li><i>共 {{#if page.totalPages}}{{page.totalPages}}{{else}}0{{/if}} 页</i></li>
            <li>
                <i>&nbsp;&nbsp;&nbsp;&nbsp;跳转到:&nbsp; </i>
                <input value="{{sum page.number 1}}" data-number="{{sum page.number 1}}" data-total-pages="{{page.totalPages}}" class="pageVal"/>
            </li>
            <li class="goPage"><a href="javascript:;">go</a></li>
        </ul>
    </div>
</div>

</script>
<!--环节设置 模态框列表 内容-->
<script type="text/x-handlebars-template" id="step-list-template">
    <div class="table-scrollable">
        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>选择</th>
                    <th> 环节名称 </th>
                    <th> 环节标识 </th>
                    <th> 环节类型 </th>
                    <th> 设置 </th>
                </tr>
            </thead>
            <tbody>
                {{#each content}}
                <tr>
                    <th> {{list-rowindex}} </th>
                    <td> <a href="#" data-target="#step-config-modal" data-toggle="modal" data-flow-key="{{flowKey}}" data-flow-name="{{flowName}}"
                            data-step-type="{{stepType}}" data-step-name="{{stepName}}" data-step-desc="{{stepDesc}}" data-step-key="{{stepKey}}">{{stepName}}</a>                        </td>
                    <td> {{stepKey}} </td>
                    <td> {{stepType}} </td>
                    <td> <a href="#" data-step-key="{{stepKey}}">表单项处理</a> </td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</script>

<script type="text/x-handlebars-template" id="relview-sel-template">
    <form name="relviewform" action="#">
        <div class="table-scrollable">
            <table id="relview-sel-table" class="table table-striped table-bordered table-hover">
                <tbody>
                    {{#if content}} {{#each content}}
                    <tr class="normal">
                        <td width="30%">
                            <input type="hidden" name="relviewTname" value="{{typeName}}" />
                            <select name="relviewTcode" class="form-control relviewtype" data-selectloader-vkey="code" data-selectloader-tkey="name"
                                data-selectloader-store="relviewtype" data-text-input="input[name=relviewTname]" data-selectloader-val="{{typeCode}}"
                                tabindex="1">
                <option value="">请选择视图类型...</option>
              </select>
                            <td width="50%">
                                <input type="hidden" name="relviewName" value="{{name}}" />
                                <select name="relviewCode" class="form-control relviewsel" data-selectloader-vkey="code" data-selectloader-tkey="name" data-selectloader-store="relview"
                                    data-text-input="input[name=relviewName]" data-selectloader-val="{{code}}" data-placeholder="视图..."
                                    tabindex="1">
                <option value="">请选择视图...</option>
              </select>
                            </td>
                            <td width="10%"> <input name="dispOrder" type="text" class="form-control input-sm" value="{{dispOrder}}" required>                                </td>
                            <td width="10%"> <a href="#" style="float:right;" class="btn btn-circle btn-default btn-sm"><i class="fa fa-minus font-blue"></i> </a>                                </td>
                    </tr>
                    {{/each}} {{else}}
                    <tr class="no-data">
                        <td colspan="10" align="center">暂无关联</td>
                    </tr>
                    {{/if}}
                </tbody>
            </table>
        </div>
    </form>
</script>
<script type="text/x-handlebars-template" id="relview-sel-tr-template">
    <tr class="normal">
        <td width="30%">
            <input type="hidden" name="relviewTname" />
            <select name="relviewTcode" class="form-control relviewtype" data-selectloader-vkey="code" data-selectloader-tkey="name"
                data-selectloader-store="relviewtype" data-text-input="input[name=relviewTname]" data-selectloader-val="" tabindex="1">
          <option value="">请选择...</option>
        </select>
            <td width="50%">
                <input type="hidden" name="relviewName" />
                <select name="relviewCode" class="form-control relviewsel" data-selectloader-vkey="code" data-selectloader-tkey="name" data-selectloader-store="relview"
                    data-text-input="input[name=relviewName]" data-selectloader-val="" tabindex="1">
          <option value="">请选择...</option>
        </select>
            </td>
            <td width="10%"> <input name="dispOrder" type="text" class="form-control input-sm" value=""> </td>
            <td width="10%"> <a href="#" style="float:right;" class="btn btn-circle btn-default btn-sm"><i class="fa fa-minus font-blue"></i> </a>                </td>
    </tr>
</script>

<script type="text/x-handlebars-template" id="plug-sel-template">
    <div class="table-scrollable">
        <table id="plug-sel-table" class="table table-striped table-bordered table-hover">
            <tbody>
                {{#if content}} {{#each content}}
                <tr class="normal">
                    <td width="30%">
                        <select name="triggerStage" class="form-control triggerStage" data-selectloader-vkey="code" data-selectloader-tkey="name"
                            data-selectloader-store="triggerStage" data-selectloader-val="{{triggerStage}}" tabindex="1">
                <option value="">请选择触发阶段...</option>
              </select>
                        <td width="60%">
                            <select name="plugName" class="form-control selectloader-bpmlisteners" data-selectloader-vkey="name" data-selectloader-tkey="desc"
                                data-selectloader-store="bpmlisteners" data-selectloader-val="{{plugName}}" tabindex="1">
          			<option value="">请选择...</option>
        			</select>
                        </td>
                        <td width="10%"> <a href="#" style="float:right;" class="btn btn-circle btn-default btn-sm"><i class="fa fa-minus font-blue"></i> </a>                            </td>
                </tr>
                {{/each}} {{else}}
                <tr class="no-data">
                    <td colspan="10" align="center">暂无关联</td>
                </tr>
                {{/if}}
            </tbody>
        </table>
    </div>
</script>
<script type="text/x-handlebars-template" id="plug-sel-tr-template">
    <tr class="normal">
        <td width="30%">
            <select name="triggerStage" class="form-control triggerStage" data-selectloader-vkey="code" data-selectloader-tkey="name"
                data-selectloader-store="triggerStage" data-selectloader-val="" tabindex="1">
          <option value="">请选择触发阶段...</option>
        </select>
            <td width="60%">
                <select name="plugName" class="form-control selectloader-bpmlisteners" data-selectloader-vkey="name" data-selectloader-tkey="desc"
                    data-selectloader-store="bpmlisteners" data-selectloader-val="" tabindex="1">
          <option value="">请选择...</option>
        </select>
            </td>
            <td width="10%"> <a href="#" style="float:right;" class="btn btn-circle btn-default btn-sm"><i class="fa fa-minus font-blue"></i> </a>                </td>
    </tr>
</script>

<!-- 自定义js文件  -->
<!-- @Override -->
<script src="/static/app/1.0.0/js/bpm/activiti.js"></script>
<script src="/static/app/1.0.0/js/bpm/urls.js"></script>
<script src="/static/app/1.0.0/js/common/app-context.js"></script>
<script src="/static/app/1.0.0/js/cb/common-tools.js"></script>

</body>
</html>